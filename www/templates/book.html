<ion-view view-title="Book">
  <ion-content padding="true" ng-show="vm.book">
    <div class="row">
      <div class="col-80">
        <h1>{{vm.book.title}}</h1>
      </div>
      <div class="col-20">
        <a ng-click="vm.toggleFavorite()">
          <i ng-hide="vm.book.isFavorite" class="ion-ios-star-outline" style="font-size:4em"></i>
          <i ng-show="vm.book.isFavorite" class="ion-ios-star" style="font-size:4em"></i>
        </a>
      </div>
    </div>
    <div class="row" ng-show="vm.book.authors">
      <p>by {{vm.book.authors}}</p>
    </div>
    <div class="row">
      <div class="col-100"><img height="200px" ng-src="{{vm.book.links.cover}}"></div>
    </div>
    <div class="row">
      <div class="col-100"><p>{{vm.book.note}}</p></div>
    </div>
    <div class="row" ng-show="vm.book.publisher">
      <div class="col-20">Publisher</div>
      <div class="col">{{vm.book.publisher}}</div>
    </div>
    <div class="row" ng-show="vm.book.date">
      <div class="col-20">Year</div>
      <div class="col">{{vm.book.date}}</div>
    </div>
    <div class="row" ng-show="vm.book.isbn.length">
      <div class="col-20">ISBN</div>
      <div class="col">{{vm.book.isbns[0]}}</div>
    </div>
    <div class="row" ng-show="vm.book.edition">
      <div class="col-20">Edition</div>
      <div class="col">{{vm.book.edition}}</div>
    </div>
    <div class="row">
      <div class="col-20">Format</div>
      <div class="col">{{vm.book.format || 'Unknown'}}</div>
    </div>

    <!-- Electronic -->
    <div ng-show="vm.book.electronic">
        <div class="row">
          <strong>Electronic version</strong>
        </div>
        <div class="row">
          <div class="col-20">
            <img src="img/available.png" width="35px;">
          </div>
          <div class="col">
            <a ng-href="{{vm.book.electronic.url}}" ng-hide="vm.book.electronic.url.toString().indexOf('uresolver') !== -1">Read online</a>
            <div ng-show="vm.book.electronic.url.toString().indexOf('uresolver') !== -1">
              <div style="position:absolute;z-index:1; background:#eee;" ng-show="!vm.uresolverLoaded">Loading...</div>
              <iframe ng-src="{{vm.book.electronic.url}}" style="width:100%;height:120px;" ubo-iframe-onload="vm.uresolverLoaded = true"></iframe>
            </div>
          </div>
        </div>
    </div>


    <!-- Print -->
    <div ng-show="vm.book.print">
        <div class="row">
          <strong>Printed version</strong>
        </div>

        <div class="row">
          <div class="col-100">
            <p ng-show="vm.book.print.available && vm.book.print.library === vm.localLibrary"><img src="img/available.png" width="35px"/> Available at Realfagsbiblioteket.</p>
            <p ng-show="vm.book.print.available && vm.book.print.library !== vm.localLibrary"><img src="img/available.png" width="35px"/> Not available at Realfagsbiblioteket, but available at {{ vm.book.print.library}}. Call XYZ or ask at the reception if you need directions.</p>
            <p ng-hide="vm.book.print.available"><img src="img/unavailable.png" width="35px"/> Unavailable. (TODO: Add link to form for ordering the item).</p>
          </div>
        </div>

        <!-- Help locating the item -->
        <div class="row" ng-show="vm.book.print.floor_text">
          <div class="col-20">Floor</div>
          <div class="col">{{vm.book.print.floor_text}}</div>
        </div>
        <div class="row" ng-show="vm.book.print.collection_name">
          <div class="col-20">Collection</div>
          <div class="col">{{vm.book.print.collection_name}}</div>
        </div>
        <div class="row" ng-show="vm.book.print.callcode">
          <div class="col-20">Code</div>
          <div class="col">{{vm.book.print.callcode}}</div>
        </div>

        <div class="row" ng-show="vm.book.print.map_url_image!=''">
          <div class="col-100">
            <img ng-src="{{vm.book.print.map_url_image}}" width="100%" alt="">
          </div>
        </div>
    </div>

  </ion-content>
  <ion-content padding="true" ng-hide="vm.book">
    <p>
      An error occured: {{ vm.error || 'Unknown error.' }}
    </p>
  </ion-content>
</ion-view>
